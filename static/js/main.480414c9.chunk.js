(this.webpackJsonpburger=this.webpackJsonpburger||[]).push([[0],[,,,,function(e,t,a){e.exports={BreadTop:"style_BreadTop__gvimQ",Seed:"style_Seed__kP7HA",Second:"style_Second__1_9L1",Third:"style_Third__6y4eC",Fourth:"style_Fourth__1cDzs",Salad:"style_Salad__2vhrE",Meat:"style_Meat__2EGww",Cheese:"style_Cheese__3P-mH",Bacon:"style_Bacon__3y6u5",BreadBottom:"style_BreadBottom__fhtqZ"}},,,function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a(3),o=a(0),c=a.n(o),l=a(13),s=c.a.createContext(),i={saving:!1,logginIn:!1,error:null,errorCode:null,token:null,userId:null,expireDate:null},u=function(e){var t=Object(o.useState)(i),a=Object(r.a)(t,2),u=a[0],d=a[1],m=function(e,t,a,r){localStorage.setItem("token",e),localStorage.setItem("userId",t),localStorage.setItem("expireDate",a),localStorage.setItem("refreshToken",r),d(Object(n.a)({},u,{logginIn:!1,error:null,errorCode:null,token:e,userId:t,expireDate:a}))};return c.a.createElement(s.Provider,{value:{state:u,signupUser:function(e,t){d(Object(n.a)({},u,{saving:!0}));var a={email:e,password:t,returnSecureToken:!0};l.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyCEmDZW6k2XJlQritKoYeJG14ExYa1rRSM",a).then((function(e){var t=e.data.idToken,a=e.data.localId;localStorage.setItem("token",t),localStorage.setItem("userId",a),d(Object(n.a)({},u,{saving:!1,token:t,userId:a,error:null,errorCode:null}))})).catch((function(e){d(Object(n.a)({},u,{saving:!1,token:null,userId:null,error:e.message,errorCode:e.code}))}))},loginUser:function(e,t){d(Object(n.a)({},u,{logginIn:!0}));var a={email:e,password:t,returnSecureToken:!0};l.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB22Ov2x0bkJHP-ydsuA8ra9vnw5DXEmAg",a).then((function(e){console.log("Logged in =======>",e.data),console.log(new Date);var t=e.data.idToken,a=e.data.localId,n=e.data.expiresIn,r=new Date((new Date).getTime()+1e3*n),o=e.data.refreshToken;m(t,a,r,o)})).catch((function(e){d(Object(n.a)({},u,{logginIn:!1,error:e.message,errorCode:e.code,token:null,userId:null,expireDate:null}))}))},logout:function(){localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("expireDate"),localStorage.removeItem("refreshToken"),d(i)},loginUserSucces:m,autoRenewTokenAfterMillisec:function e(t){l.a.post("https://securetoken.googleapis.com/v1/token?key=AIzaSyB22Ov2x0bkJHP-ydsuA8ra9vnw5DXEmAg",{grant_type:"refresh_token",refresh_token:localStorage.getItem("refreshToken")}).then((function(e){console.log("Token refreshed .....",e.data);var t=e.data.id_token,a=e.data.user_id,n=e.data.expires_in,r=new Date((new Date).getTime()+1e3*n),o=e.data.refresh_token;m(t,a,r,o)})).catch((function(e){d(Object(n.a)({},u,{logginIn:!1,error:e.message,errorCode:e.code,token:null,userId:null,expireDate:null}))})),setTimeout((function(){e(36e5)}),t)}}},e.children)};t.b=s},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(18),r=a(1),o=a(3),c=a(0),l=a.n(c),s=a(13),i=l.a.createContext(),u={salad:150,cheese:250,bacon:800,meat:1500},d={ingredients:{salad:0,cheese:0,bacon:0,meat:0},totalPrice:1e3,purchasing:!1,ingredientNames:{bacon:"\u0413\u0430\u0445\u0430\u0439\u043d \u043c\u0430\u0445",cheese:"\u0411\u044f\u0441\u043b\u0430\u0433",meat:"\u04ae\u0445\u0440\u0438\u0439\u043d \u043c\u0430\u0445",salad:"\u0421\u0430\u043b\u0430\u0434"},saving:!1,finished:!1,error:null},m=function(e){var t=Object(c.useState)(d),a=Object(o.a)(t,2),m=a[0],g=a[1];return l.a.createElement(i.Provider,{value:{burger:m,addIngredient:function(e){g(Object(r.a)({},m,{ingredients:Object(r.a)({},m.ingredients,Object(n.a)({},e,m.ingredients[e]+1)),totalPrice:m.totalPrice+u[e],purchasing:!0}))},removeIngredient:function(e){var t=m.totalPrice-u[e];g(Object(r.a)({},m,{ingredients:Object(r.a)({},m.ingredients,Object(n.a)({},e,m.ingredients[e]-1)),totalPrice:t,purchasing:t>1e3}))},saveBurger:function(e,t){g(Object(r.a)({},m,{saving:!0})),s.a.post("orders.json?auth=".concat(t),e).then((function(e){g(Object(r.a)({},m,{saving:!1,finished:!0,error:null}))})).catch((function(e){g(Object(r.a)({},m,{saving:!1,finished:!0,error:e}))}))},clearBurger:function(){g(d)},toggle:function(){g(Object(r.a)({},m,{saving:!m.saving}))}}},e.children)};t.b=i},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(25),c=a.n(o);t.a=function(e){return r.a.createElement("button",{onClick:e.daragdsan,className:"".concat(c.a.Button," ").concat(c.a[e.btnType])},e.text)}},function(e,t,a){"use strict";var n=a(46),r=a.n(n).a.create({baseURL:"https://ariburger-88aef-default-rtdb.firebaseio.com/"});t.a=r},,,function(e,t,a){e.exports={SideBar:"style_SideBar__1djTD",Open:"style_Open__h8zo0",Close:"style_Close__21wBL",Logo:"style_Logo__3P5tK"}},,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(52),c=a.n(o);t.a=function(){return r.a.createElement("div",{className:c.a.Loader})}},,function(e,t,a){e.exports={Toolbar:"style_Toolbar__12e-F",HideOnMobile:"style_HideOnMobile__1vM5k"}},function(e,t,a){e.exports={MenuItem:"style_MenuItem__3P5lN",active:"style_active__LoqaC"}},,,function(e,t,a){e.exports={Button:"style_Button__aBPxa",Success:"style_Success__12oLq",Danger:"style_Danger__1As0q"}},,,,,,,,,,,function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(48),c=a.n(o);t.a=function(e){return e.show?r.a.createElement("div",{onClick:e.darahad,className:c.a.Shadow}):null}},function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(1),r=a(3),o=a(0),c=a.n(o),l=a(13),s=c.a.createContext(),i={orders:[],loading:!1,error:null},u=function(e){var t=Object(o.useState)(i),a=Object(r.a)(t,2),u=a[0],d=a[1];return c.a.createElement(s.Provider,{value:{state:u,loadOrders:function(e,t){d(Object(n.a)({},u,{loading:!0})),l.a.get("orders.json?&auth=".concat(t,'&orderBy="userId"&equalTo="').concat(e,'"')).then((function(e){var t=Object.entries(e.data).reverse();d(Object(n.a)({},u,{orders:t}))})).catch((function(e){return d(Object(n.a)({},u,{error:e}))}))}}},e.children)};t.b=s},function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(4),c=a.n(o),l=function(e){return"bread-top"===e.type?r.a.createElement("div",{className:c.a.BreadTop},r.a.createElement("div",{className:c.a.Seed}),r.a.createElement("div",{className:"".concat(c.a.Seed," ").concat(c.a.Second)}),r.a.createElement("div",{className:"".concat(c.a.Seed," ").concat(c.a.Third)}),r.a.createElement("div",{className:"".concat(c.a.Seed," ").concat(c.a.Fourth)})):"salad"===e.type?r.a.createElement("div",{className:c.a.Salad}):"bacon"===e.type?r.a.createElement("div",{className:c.a.Bacon}):"meat"===e.type?r.a.createElement("div",{className:c.a.Meat}):"cheese"===e.type?r.a.createElement("div",{className:c.a.Cheese}):"bread-bottom"===e.type?r.a.createElement("div",{className:c.a.BreadBottom}):r.a.createElement("div",null,"...")},s=a(49),i=a.n(s),u=a(11);t.a=function(e){var t=Object(n.useContext)(u.b);return console.log("hello"),Object(n.useMemo)((function(){console.log("Burger rendered!!!!....");var e=Object.entries(t.burger.ingredients),a=[];return e.map((function(e){for(var t=0;t<e[1];t++)a.push(r.a.createElement(l,{key:"".concat(e[0]).concat(t+1),type:e[0]}))})),0===a.length&&(a=r.a.createElement("p",null,"\u0425\u0430\u0447\u0438\u0440\u0442\u0430\u0439 \u0442\u0430\u043b\u0445\u043d\u044b\u0445\u0430\u0430 \u043e\u0440\u0446\u044b\u0433 \u0441\u043e\u043d\u0433\u043e\u043d\u043e \u0443\u0443...")),r.a.createElement("div",{className:i.a.Burger},r.a.createElement(l,{type:"bread-top"}),a,r.a.createElement(l,{type:"bread-bottom"}))}),[t.burger.ingredients])}},,function(e,t,a){e.exports={Content:"style_Content__2T5tB"}},function(e,t,a){e.exports=a.p+"static/media/burger-logo.b8503d26.png"},function(e,t,a){e.exports={Logo:"style_Logo__3brAr"}},function(e,t,a){e.exports={Menu:"style_Menu__JQ8jh"}},,,,function(e,t,a){e.exports={HamburgerMenu:"style_HamburgerMenu__UZv65"}},function(e,t,a){e.exports={Shadow:"style_Shadow__1qfJV"}},function(e,t,a){e.exports={Burger:"style_Burger__3V9AZ"}},function(e,t,a){e.exports={ShippingPage:"style_ShippingPage__lmb6q"}},function(e,t,a){e.exports={ContactData:"style_ContactData__2UBqT"}},function(e,t,a){e.exports={Loader:"style_Loader__1Vb0K",load1:"style_load1__1u0hv"}},function(e,t,a){e.exports={Login:"style_Login__2nZ5e"}},function(e,t,a){e.exports=a(82)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(39),c=a.n(o),l=(a(59),a(3)),s=a(14),i=a(40),u=a.n(i),d=a(21),m=a.n(d),g=a(41),b=a.n(g),f=a(42),p=a.n(f),v=function(){return r.a.createElement("div",{className:p.a.Logo},r.a.createElement("img",{src:b.a}))},E=a(43),h=a.n(E),_=a(9),y=a(22),S=a.n(y),O=function(e){return r.a.createElement("li",{className:S.a.MenuItem},r.a.createElement(_.b,{exact:e.exact,activeClassName:S.a.active,to:e.link},e.children))},j=a(7),k=function(e){var t=Object(n.useContext)(j.b);return r.a.createElement("div",null,r.a.createElement("ul",{className:h.a.Menu},t.state.userId?r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{exact:!0,link:"/"},"\u0428\u0418\u041d\u042d \u0417\u0410\u0425\u0418\u0410\u041b\u0413\u0410"),r.a.createElement(O,{link:"/orders"},"\u0417\u0410\u0425\u0418\u0410\u041b\u0413\u0410\u041d\u0423\u0423\u0414"),r.a.createElement(O,{link:"/logout"},"\u0413\u0410\u0420\u0410\u0425")):r.a.createElement(r.a.Fragment,null,r.a.createElement(O,{link:"/login"},"\u041d\u042d\u0412\u0422\u0420\u042d\u0425"),r.a.createElement(O,{link:"/signup"},"\u0411\u04ae\u0420\u0422\u0413\u04ae\u04ae\u041b\u042d\u0425"))))},x=a(47),I=a.n(x),B=function(e){return r.a.createElement("div",{onClick:e.toggleSideBar,className:I.a.HamburgerMenu},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},C=function(e){return r.a.createElement("header",{className:m.a.Toolbar},r.a.createElement(B,{toggleSideBar:e.toggleSideBar}),r.a.createElement(v,null),r.a.createElement("nav",{className:m.a.HideOnMobile},r.a.createElement(k,null)))},w=a(16),T=a.n(w),N=a(36),D=function(e){var t=[T.a.SideBar,T.a.Close];return e.showSidebar&&(t=[T.a.SideBar,T.a.Open]),r.a.createElement("div",null,r.a.createElement(N.a,{show:e.showSidebar,darahad:e.toggleSideBar}),r.a.createElement("div",{onClick:e.toggleSideBar,className:t.join(" ")},r.a.createElement("div",{className:T.a.Logo},r.a.createElement(v,null)),r.a.createElement(k,null)))},P=a(38),M=a(12),L=a(50),A=a.n(L),z=a(51),H=a.n(z),U=a(19),q=a(11),J=function(e){var t=Object(s.g)(),a=Object(n.useContext)(j.b),o=Object(n.useContext)(q.b),c=Object(n.useState)(),i=Object(l.a)(c,2),u=i[0],d=i[1],m=Object(n.useState)(),g=Object(l.a)(m,2),b=g[0],f=g[1],p=Object(n.useState)(),v=Object(l.a)(p,2),E=v[0],h=v[1],_=Object(n.useRef)();Object(n.useEffect)((function(){return o.burger.finished&&!o.burger.error&&t.replace("/orders"),function(){o.clearBurger()}}),[o.burger.finished]);return console.log("ContactData rendered...."),r.a.createElement("div",{className:H.a.ContactData},r.a.createElement("div",{ref:_},r.a.createElement("strong",{style:{fontSize:"16px"}},"\u0414\u04af\u043d : ",o.burger.totalPrice,"\u20ae")),r.a.createElement("div",null,o.burger.error&&"\u0417\u0430\u0445\u0438\u0430\u043b\u0433\u044b\u0433 \u0445\u0430\u0434\u0433\u0430\u043b\u0430\u0445 \u044f\u0432\u0446\u0430\u0434 \u0430\u043b\u0434\u0430\u0430 \u0433\u0430\u0440\u043b\u0430\u0430 : ".concat(o.burger.error)),o.burger.saving?r.a.createElement(U.a,null):r.a.createElement("div",null,r.a.createElement("input",{onChange:function(e){"red"===_.current.style.color?_.current.style.color="green":_.current.style.color="red",d(e.target.value)},type:"text",name:"name",placeholder:"\u0422\u0430\u043d\u044b \u043d\u044d\u0440"}),r.a.createElement("input",{onChange:function(e){h(e.target.value)},type:"text",name:"street",placeholder:"\u0422\u0430\u043d\u044b \u0433\u044d\u0440\u0438\u0439\u043d \u0445\u0430\u044f\u0433"}),r.a.createElement("input",{onChange:function(e){f(e.target.value)},type:"text",name:"city",placeholder:"\u0422\u0430\u043d\u044b \u0445\u043e\u0442"}),r.a.createElement(M.a,{text:"\u0418\u041b\u0413\u042d\u042d\u0425",btnType:"Success",daragdsan:function(){var e={userId:a.state.userId,orts:o.burger.ingredients,dun:o.burger.totalPrice,hayag:{name:u,city:b,street:E}};o.saveBurger(e,a.state.token)}})),r.a.createElement(M.a,{text:"Toggle",btnType:"Success",daragdsan:o.toggle}))},F=function(e){var t=Object(n.useContext)(q.b);return r.a.createElement("div",{className:A.a.ShippingPage},r.a.createElement("p",{style:{fontSize:"24px"}},r.a.createElement("strong",null,"\u0422\u0430\u043d\u044b \u0437\u0430\u0445\u0438\u0430\u043b\u0433\u0430 \u0430\u043c\u0442\u0442\u0430\u0439 \u0431\u0430\u0439\u0445 \u0431\u043e\u043b\u043d\u043e \u0433\u044d\u0436 \u043d\u0430\u0439\u0434\u0430\u0436 \u0431\u0430\u0439\u043d\u0430...")),r.a.createElement("p",{style:{fontSize:"24px"}},r.a.createElement("strong",null,"\u0414\u04af\u043d : ",t.burger.totalPrice,"\u20ae")),r.a.createElement(P.a,null),r.a.createElement(M.a,{daragdsan:function(){e.history.goBack()},btnType:"Danger",text:"\u0417\u0410\u0425\u0418\u0410\u041b\u0413\u042b\u0413 \u0426\u0423\u0426\u041b\u0410\u0425"}),r.a.createElement(M.a,{daragdsan:function(){e.history.replace("/ship/contact")},btnType:"Success",text:"\u0425\u04ae\u0420\u0413\u042d\u041b\u0422\u0418\u0419\u041d \u041c\u042d\u0414\u042d\u042d\u041b\u042d\u041b \u041e\u0420\u0423\u0423\u041b\u0410\u0425"}),r.a.createElement(s.b,{path:"/ship/contact"},r.a.createElement(J,null)))},R=a(53),Z=a.n(R),W=function(e){var t=Object(n.useContext)(j.b),a=Object(n.useState)({email:"",password:""}),o=Object(l.a)(a,2),c=o[0],i=o[1];return r.a.createElement("div",{className:Z.a.Login},t.state.userId&&r.a.createElement(s.a,{to:"/orders"}),r.a.createElement("input",{onChange:function(e){var t=e.target.value;i((function(e){return{email:t,password:e.password}}))},type:"text",placeholder:"\u0418\u043c\u044d\u0439\u043b \u0445\u0430\u044f\u0433"}),r.a.createElement("input",{onChange:function(e){var t=e.target.value;i((function(e){return{email:e.email,password:t}}))},type:"password",placeholder:"\u041d\u0443\u0443\u0446 \u04af\u0433"}),t.state.logginIn&&r.a.createElement(U.a,null),t.state.firebaseError&&r.a.createElement("div",{style:{color:"red"}},t.state.firebaseError," \u043a\u043e\u0434 \u043d\u044c : ",t.state.firebaseErrorCode),r.a.createElement(M.a,{text:"\u041b\u041e\u0413\u0418\u041d",btnType:"Success",daragdsan:function(){t.loginUser(c.email,c.password)}}))},K=function(e){var t=Object(n.useContext)(j.b);return Object(n.useEffect)((function(){t.logout()}),[]),r.a.createElement(s.a,{to:"/"})},Q=a(37),V=r.a.lazy((function(){return a.e(3).then(a.bind(null,89))})),X=r.a.lazy((function(){return a.e(4).then(a.bind(null,90))})),G=r.a.lazy((function(){return a.e(5).then(a.bind(null,88))})),Y=function(e){var t=Object(n.useContext)(j.b),a=Object(n.useState)(!1),o=Object(l.a)(a,2),c=o[0],i=o[1],d=function(){i((function(e){return!e}))};return Object(n.useEffect)((function(){var e=localStorage.getItem("token"),a=localStorage.getItem("userId"),n=new Date(localStorage.getItem("expireDate")),r=localStorage.getItem("refreshToken");e&&(n>new Date?(t.loginUserSucces(e,a,n,r),t.autoRenewTokenAfterMillisec(n.getTime()-(new Date).getTime())):t.autoRenewTokenAfterMillisec(36e5))}),[]),r.a.createElement("div",null,r.a.createElement(C,{toggleSideBar:d}),r.a.createElement(D,{showSidebar:c,toggleSideBar:d}),r.a.createElement("main",{className:u.a.Content},r.a.createElement(q.a,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"\u0422\u04af\u0440 \u0445\u04af\u043b\u044d\u044d\u043d\u044d \u04af\u04af...")},t.state.userId?r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/logout",component:K}),r.a.createElement(s.b,{path:"/orders"},r.a.createElement(Q.a,null,r.a.createElement(X,null))),r.a.createElement(s.b,{path:"/ship",component:F}),r.a.createElement(s.b,{path:"/",component:V})):r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/signup",component:G}),r.a.createElement(s.b,{path:"/login",component:W}),r.a.createElement(s.a,{to:"/login"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(_.a,null,r.a.createElement(j.a,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[54,1,2]]]);
//# sourceMappingURL=main.480414c9.chunk.js.map